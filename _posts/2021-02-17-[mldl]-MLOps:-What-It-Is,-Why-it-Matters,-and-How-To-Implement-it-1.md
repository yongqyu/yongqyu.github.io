---
layout: post
category: develop
comments_id: 2
---
[link](https://neptune.ai/blog/mlops-what-it-is-why-it-matters-and-how-to-implement-it-from-a-data-scientist-perspective?utm_source=reddit&utm_medium=post&utm_campaign=blog-mlops-what-it-is-why-it-matters-and-how-to-implement-it-from-a-data-scientist-perspective&utm_content=deeplearning)  
neptune.ai Blog     
Jan 14, 2021

이 글은 비공식 번역문 입니다.


-----------------------------------------------------

MLOps 라는건 뭘까?

나는 대형 AI 컨퍼런스에서 몇번 MLOps에 대해 들어봤고, 논문에서 언급된걸 봐왔지만, 정확이 이게 뭔지는 최근까지도 잘 몰랐다. 그러다 아프리카 모잠비크에서 데이터 마이닝 스페셜리스트로 일하는 친구와 대화를 했다. 그들은 최근 사내 ML 파이프라인을 구축하고 있었고, 동시에 나는 이 미지의 영역인 MLOps 관련 글을 쓰기 시작했었다. 이 글에서는, 이 대화에서 나는 기존 회사들 (그리고 많은 상업 ML을 하는 테크 회사들) 이 겪는 고통스러운 부분에 대해 이해하게 되었다. :

* 클라우드로 이동하기
* ML 파이프라인 생성과 관리
* 확장성
* 민감한 데이터 다루기
* 그리고 수많은 다른 문제들

그리고 나는 이것에 대해 깊게 알아보고 확장된 연구를 하고, 그리고 최대한 많이 배워 노트에 적어 나가는 것을 목표로 삼았다. 그 결과가 이 글이다. 왜 지금 이 주제를 연구하는가?

techjury에 의하면, 우리는 2019년에 비해 2020년에 10배 더 많은 데이터를 생산한다. 우리와 같은 데이터 사이언티스트들에게는, 이런 상황으로 수많은 이론과 아이디어들이 생기고, 실험되며, 새로운 발견들이 나오고 모델들이 개발되기에 마치 일찍 온 크리스마스와도 같다. 하지만 우리가 진지하게 이런 모델들이 실생활 비즈니스 문제에 접근하기를 원한다면, 다음과 같은 근본적인 문제들을 다뤄야한다.:

* 대량의 데이터를 수집하고 정제하기
* 모델 학습과 실험을 위한 버저닝, 트래킹 설정하기
* 제품 모델을 위한 배포 및 모니터링 파이프라인 구축

그리고 비즈니스와 유저를 위해 ML 운영을 확장할 방법도 찾아야한다.

더 많은 사용자가 쓸 수 있도록 기존의 소프트웨어 시스템을 확장 해야했던 과거에도 같은 이슈가 있었다. 데브옵스 (DevOps) 솔루션이 큰 규모의 소프트웨어 시스템을 개발하고 테스트하고 배포하고 운영하는 파이프라인의 집합이었다. 데브옵스를 통해, 개발 주기가 짧아졌고, 배포를 더 빠르게 하고, 감시 가능하고 독립적으로 됐다. 이는 MLOps로도 이어진다. 이는 데브옵스와 데이터 엔지니어링, 기계학습의 교집합에서 생겨났으며, 데브옵스와 컨셉이 유사하나 진행 방법은 다르다. ML 시스템은 원래 실험적이고, 빌드하고 실행하기 매우 복잡한 요소들을 많이 내포한다.

## What is MLOps? 

MLOps는 데이터 사이언티스트와 운영 전문가간의 협력과 소통을 위한 수행들의 집합이다. 이런 수행들이 대규모 제품 환경에서 퀄리티를 높이고, 관리를 수월하게 하고, ML/DL 모델의 배포를 자동화한다. 이를 통해, 규제 요구사항뿐만 아니라 비즈니스 요구사항에 모델들을 맞추기 더 쉽다.

![whatismlops](https://i0.wp.com/neptune.ai/wp-content/uploads/MLOps-cycle-1.jpg?resize=1024%2C576&ssl=1)

MLOps는 독립된 접근법에서 ML 라이프사이클 관리 방향으로 천천히 발전하고 있다. 이는 전체 라이프사이클에 적용된다. - 데이터 수집, 모델 생성 (소프트웨어 개발 라이프사이클, 지속적인 통합, 지속적인 관리 (CI/CD)), 오케스트레이션, 배포, 상태, 진단, 거버넌스 및 비즈니스 측정.

MLOps의 주요 페이즈는 :

* 데이터 수집
* 데이터 분석
* 데이터 변형/준비
* 모델 학습 & 개발
* 모델 평가
* 모델 서빙
* 모델 모니터링
* 모델 재학습


### DevOps vs MLOps

![mlops](https://i0.wp.com/neptune.ai/wp-content/uploads/MLOps-DevOps.png?w=896&ssl=1)
*source:NealAnalytics*

데브옵스와 MLOps는 MLOps가 데브옵스의 원리에서 나왔기에 근본적으로는 비슷하다. 하지만 실행할 때는 좀 다르다.:

1. 데브옵스와 달리, **MLOps는 좀 더 실험적**이다. 데이터 사이언티스트들과 ML/DL 엔지니어들은 다양한 피처들 - 하이퍼파라미터, 파라미터, 모델들 - 을 바꿔봐야 할 뿐 아니라, 결과를 재현하기 위해 이 피처들과 데이터, 코드 베이스들을 잘 트랙킹 해야한다. 모든 노력과 도구들에도 불구하고, ML/DL 산업은 여전히 결과 재구현 문제에 어려움을 겪고 있다. 이 문제는 이 글의 범위를 넘어서기에, 이 글에서 다루지는 않는다.  
2. **다양한 팀 구성**: 상품을 위해 모델을 개발하고 배포하는 팀을 구성할때 소프트웨어 엔지니어들로만 구성하지는 않는다. ML 프로젝트에서는, 일반적으로 데이터 분석, 모델 개발 및 실험에 초점을 맞춘 데이터 사이언티스트 또는 ML 연구원들이 포함된다. 그들은 상품 수준의 서비스를 개발한 적 있는 소프트웨어 엔지니어가 아닐 가능성이 높다.
3. **테스트**: ML 시스템을 테스트하는 것은 모델 평가, 모델 학습과 같은 것들 (그리고 유닛 테스트나 통합 테스트 같은 기존의 코드 테스트들) 이 포함된다.
4. **자동화된 배포**: 오프라인에서 학습된 ML 모델을 예측 서비스로 배포할수는 없다. 다양한 단계의 자동화된 모델 재학습 및 배포 파이프라인이 필요하다. 이 파이프라인은 복잡도를 더하는데, 왜냐하면 이 단계들은 원래 데이터 사이언티스트들이 수작업으로 진행하던 학습부터 평가 단계를 자동화 해야하기 때문이다.
5. **제품 성능이 데이터 프로파일 또는 단순한 학습-서빙 쏠림으로 저하**된다.: 제품에 있는 ML 모델들은 코드 최적화 문제로 성능이 낮아질 수 있을 뿐 아니라, 계속 발달하는 데이터 프로파일 문제로도 야기된다. 모델은 기존 소프트웨어 시스템보다 더 많은 이유들로 성능이 저하될 수 있기 때문에, 이를 대비해야 한다. 이런 이유들은 다음과 같다.: 
* 학습 시와 서비스 시의 데이터 처리 방법 차이
* 학습 시와 서비스 시의 데이터 변화
* 피드백 루프 - 최적화 하려는 가설이 잘못 된 경우, 학습을 위해 편향된 데이터를 수집하게 된다. 그러면 알아차리지 못한채, 미래 버전의 재학습과 최적화에 다시 들어가게 되고 모델을 점점 더 편항되게 된다.
6. **모니터링**: 제품의 모델들은 모니터링 되고 있어야 한다. 비슷하게, 데이터의 요약된 통계값도 적절한 시기에 모델을 바꿀 수 있도록 관찰되고 있어야 한다. 이런 통계들은 시간이 지남에 따라 변하고, 이에 따른 알림을 받거나 예상치를 벗어날 경우 프로세스를 되돌려야 한다.

MLOps와 데브옵스는 소스 컨트롤의 지속적인 통합, 유닛 테스트, 통합 테스트 그리고 소프트웨어 모듈이나 패키지의 지속적인 제공을 한다는 면에서는 유사하다. 하지만 ML에서는 눈여겨 볼만한 차이점들이 있다.

* **지속적인 통합 (CI)** 는 더이상 코드와 구성요소를 테스트하고 검증하는 것만이 아니다. 데이터, 데이터 스키마, 모델들도 테스트와 검증이 필요하다.
* **지속적 제공 (CD)** 는 더이상 하나의 소프트웨어 페키지나 서비스에 관한 것이 아닌, 자동으로 다른 서비스 (모델 예측 서비스) 를 제공하거나 변화를 되돌리는 시스템 (ML 학습 파이프라인) 과도 관련이 있다.
* **지속적 평가 (CT)** 는 ML 시스템의 특징적인 새 요소로, 자동화 된 재학습과 모델 서빙에 관한 것이다.

![mlops_pipe](https://i2.wp.com/neptune.ai/wp-content/uploads/ML-process.png?resize=1024%2C389&ssl=1)

### MLOps vs Experiment Tracking vs ML Model Management

MLOps가 무엇인지 알아봤는데, 그럼 실험 추적과 ML 모델 관리는 무엇인가.

#### **Experiment Tracking**

실험 추적은 MLOps의 한 파트로써, 다양한 환경 (하이퍼파라미터, 모델 크기, 데이터 구분 방법, 파라미터 등) 에서 여러번의 실험에 걸친 모델 학습 정보를 수집, 구성, 추적하는데에 초점이 있다. 이미 언급했듯이, ML/DL은 원래 매우 실험적이기 때문에, 다른 모델들을 비교하기 위해 실험 추적 도구를 쓴다.

#### **Model Management**

ML 모델이 일관되도록 하기 위해, 그리고 모든 비즈니스 요구사항과 확장성 면에서 부합하도록, 모델 관리를 위한 논리적이고 따라하기 쉬운 정책이 필수적이다. MLOps 방법론은 모델 학습, 패키징, 검증, 배포 그리고 모니터링을 간소화하는 과정이 포함한다. 이러면 처음부터 끝까지 인관되게 ML 프로젝트를 수행할 수 있다. 설정을 깔끔하게 하기 위해, 모델 관리를 위한 방법론은 이렇게 구성할 수 있다.:

* 공통된 비즈니스 고민들을 사전에 해결
* 데이터, 모델, 코드 그리고 모델 버전을 트랙킹 함으로 모델 재구현 가능
* 재사용성을 위해 반복되는 설정에서의 모델 구성 및 배포

## Why does MLOps matter?

MLOps는 필수적이다. 기계 학습은 개인과 비즈니스가 더 효율적인 워크플로우를 만들고, 의사 결정에 데이터를 활용하고, 사용자 경험을 향상시켜 기존에 도달하지 못한 수익원을 얻고, 시간과 비용을 줄이는 솔루션을 배포하는 것을 돕는다. 이런 목표는 구체적인 프레임워크 없이는 이루기 어렵다. MLOps를 통한 자동화된 모델 개발과 배포는 시장까지 가는 시간을 줄이고 운영 비용 절감을 의미한다. 이는 관리자와 개발자가 더 에자일스럽고 전략적으로 결정할 수 있도록 도와준다. MLOps는 개인과 작은 팀, 심지어 사업 전체가 제약이나, 민감 데이터, 적은 리소스 및 예산 등에 구애받지 않고 목표에 도달하도록 지도같은 역할을 한다. MLOps가 돌에 적힌 글이 아니라 실용적이기 때문에 그 지도의 크기를 원하는 크기로 결정할 수 있다. 다양하게 실험하며 원하는 것만 남길 수 있다.

## MLOps best practices

가장 먼저, 나는 딱 10개의 베스트 예제를 원했지만, 어느정도 찾아보니 최고의 예제를 다양한 ML 파이프라인 구성요소 (팀, 데이터, 오브젝트, 모델, 코드, 배포) 별로 다루는 것이 낫겠다고 결론지었다. 다음 리스트가 다양한 출처의 참고자료에서 언급된 것을 추린 것이다.:  
> [원문](https://neptune.ai/blog/mlops-what-it-is-why-it-matters-and-how-to-implement-it-from-a-data-scientist-perspective?utm_source=reddit&utm_medium=post&utm_campaign=blog-mlops-what-it-is-why-it-matters-and-how-to-implement-it-from-a-data-scientist-perspective&utm_content=deeplearning) 참조